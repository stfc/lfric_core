[mesh]
compulsory=true
ns=namelist/Mesh
sort-key=a01
title=Mesh generator


[mesh=class]
compulsory=true
sort-key=
trigger=namelist:biperiodic_mesh_generator:  Bi-periodic ;
       =file:biperiodic.nml:                 Bi-periodic ;
       =namelist:cubedsphere_mesh_generator: Cubed-sphere ;
       =file:cubedsphere.nml:                Cubed-sphere ;
values=Bi-periodic, Cubed-sphere


[file:biperiodic.nml]
compulsory=true


[file:cubedsphere.nml]
compulsory=true


[namelist:biperiodic_mesh_generator]
compulsory=true
ns=namelist/Mesh/biperiodic
sort-key=a01
title=Bi-Periodic Mesh


[namelist:biperiodic_mesh_generator=mesh_filename]
compulsory=true
description=Filename of ugrid file to write Bi-Periodic mesh data to.
sort-key=a02
type=character
!string_length=filename


[namelist:biperiodic_mesh_generator=nmeshes]
compulsory=true
description=Number of Bi-periodic meshes to produce.
fail-if=this < 1
help=If multiple meshes are requested ----something on how maps are created and configuration 
!kind=default
range=1:
sort-key=a03
type=integer


[namelist:biperiodic_mesh_generator=mesh_names]
!bounds=namelist:biperiodic_mesh_generator=nmeshes
compulsory=true
description=Name(s) to assign mesh(es).
fail-if=len(this) < 1 ;
        len(this) != namelist:biperiodic_mesh_generator=nmeshes ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_x) ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_y)
help=These mesh names are used as variable names to identify
    =meshes in UGRID conformant, NetCDF output file.
length=:
type=character
sort-key=a04
!string_length=default


[namelist:biperiodic_mesh_generator=edge_cells_x]
!bounds=namelist:biperiodic_mesh_generator=nmeshes
compulsory=true
description=Number of edges cells in x-axis for each mesh.
fail-if= this < 2 ;
        len(this) != namelist:biperiodic_mesh_generator=nmeshes ;
        len(this) != len(namelist:biperiodic_mesh_generator=mesh_names) ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_y)
help= min number of cells = 2, must be factor of previous edge cells for map creation
!kind=default
length=:
range=2:
sort-key=a05
type=integer


[namelist:biperiodic_mesh_generator=edge_cells_y]
!bounds=namelist:biperiodic_mesh_generator=nmeshes
compulsory=true
description=Number of edges cells in y-axis for each mesh.
fail-if= this < 2 ;
        len(this) != namelist:biperiodic_mesh_generator=nmeshes ;
        len(this) != len(namelist:biperiodic_mesh_generator=mesh_names) ;
        len(this) != len(namelist:biperiodic_mesh_generator=edge_cells_x)
help= min number of cells = 2, must be factor of previous edge cells for map creation
!kind=default
length=:
range=2:
sort-key=a06
type=integer


[namelist:biperiodic_mesh_generator=domain_x]
compulsory=true
description=Domain size (x-direction)
fail-if= this < 0
help=Grid domain size of mesh in x-direction, for even numbers of cells in x,
    =the mesh will be centred on y=0.0m. The same domain size will be applied
    =to requested meshes.
!kind=default
range=0.0:
sort-key=a07
type=real


[namelist:biperiodic_mesh_generator=domain_y]
compulsory=true
description=Domain size (y-direction)
fail-if= this < 0
help=Grid domain size of mesh in y-direction, for even numbers of cells in y,
    =the mesh will be centred on x=0.0m. The same domain size will be applied
    =to requested meshes.
!kind=default
range=0.0:
sort-key=a08
type=real


[namelist:cubedsphere_mesh_generator]
compulsory=true
ns=namelist/Mesh/cubedsphere
sort-key=b01
title=Cubed-Sphere Mesh


[namelist:cubedsphere_mesh_generator=mesh_filename]
compulsory=true
description=Filename of ugrid file to write cubed-sphere mesh data to.
sort-key=b02
!string_length=filename
type=character


[namelist:cubedsphere_mesh_generator=nmeshes]
compulsory=true
description=Number of cubed-sphere meshes to produce.
help=If multiple meshes are requested ----something on how maps are created and configuration 
!kind=default
type=integer
range=1:
fail-if=this < 1
sort-key=b03


[namelist:cubedsphere_mesh_generator=mesh_names]
!bounds=namelist:cubedsphere_mesh_generator=nmeshes
compulsory=true
description=Name(s) to assign mesh(es).
fail-if = len(this) < 1 ;
          len(this) != namelist:cubedsphere_mesh_generator=nmeshes ;
          len(this) != len(namelist:cubedsphere_mesh_generator=edge_cells) ;
help=These mesh names are used as variable names to identify
    =meshes in UGRID conformant, NetCDF output file.
length=:
sort-key=b04
!string_length=default
type=character


[namelist:cubedsphere_mesh_generator=edge_cells]
!bounds=namelist:cubedsphere_mesh_generator=nmeshes
compulsory=true
description=Number of edge cells per mesh panel
fail-if= this < 3 ;
         len(this) != namelist:cubedsphere_mesh_generator=nmeshes ;
         len(this) != len(namelist:cubedsphere_mesh_generator=mesh_names) ;
help=Cells on a panel edge, Cubed-Sphere is made up of 6 rectangular
    =panels with equal numbers of cells on each panels edge.
!kind=default
length=:
range=3:
sort-key=b05
type=integer


[namelist:cubedsphere_mesh_generator=smooth_passes]
compulsory=true
description=Number of smoothing iterations
fail-if= this < 0
help=Smoothing is only applied the highest resolution mesh in a run configuration.
!kind=default
range=0:
sort-key=b06
type=integer








